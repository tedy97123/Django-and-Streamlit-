{"ast":null,"code":"var defaultBindingOptions = {\n  allowDownsampling: true\n};\nexport function bindToDevicePixelRatio(canvas, options) {\n  if (options === void 0) {\n    options = defaultBindingOptions;\n  }\n\n  return new DevicePixelRatioBinding(canvas, options);\n}\n\nvar DevicePixelRatioBinding =\n/** @class */\nfunction () {\n  function DevicePixelRatioBinding(canvas, options) {\n    var _this = this;\n\n    this._resolutionMediaQueryList = null;\n\n    this._resolutionListener = function (ev) {\n      return _this._onResolutionChanged();\n    };\n\n    this._canvasConfiguredListeners = [];\n    this.canvas = canvas;\n    this._canvasSize = {\n      width: this.canvas.clientWidth,\n      height: this.canvas.clientHeight\n    };\n    this._options = options;\n\n    this._configureCanvas();\n\n    this._installResolutionListener();\n  }\n\n  DevicePixelRatioBinding.prototype.destroy = function () {\n    this._canvasConfiguredListeners.length = 0;\n\n    this._uninstallResolutionListener();\n\n    this.canvas = null;\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"canvasSize\", {\n    get: function () {\n      return {\n        width: this._canvasSize.width,\n        height: this._canvasSize.height\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.resizeCanvas = function (size) {\n    this._canvasSize = {\n      width: size.width,\n      height: size.height\n    };\n\n    this._configureCanvas();\n  };\n\n  Object.defineProperty(DevicePixelRatioBinding.prototype, \"pixelRatio\", {\n    get: function () {\n      // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n      // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n      var win = this.canvas.ownerDocument.defaultView;\n\n      if (win == null) {\n        throw new Error('No window is associated with the canvas');\n      }\n\n      return win.devicePixelRatio > 1 || this._options.allowDownsampling ? win.devicePixelRatio : 1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DevicePixelRatioBinding.prototype.subscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners.push(listener);\n  };\n\n  DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured = function (listener) {\n    this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (l) {\n      return l != listener;\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._configureCanvas = function () {\n    var ratio = this.pixelRatio;\n    this.canvas.style.width = this._canvasSize.width + \"px\";\n    this.canvas.style.height = this._canvasSize.height + \"px\";\n    this.canvas.width = this._canvasSize.width * ratio;\n    this.canvas.height = this._canvasSize.height * ratio;\n\n    this._emitCanvasConfigured();\n  };\n\n  DevicePixelRatioBinding.prototype._emitCanvasConfigured = function () {\n    var _this = this;\n\n    this._canvasConfiguredListeners.forEach(function (listener) {\n      return listener.call(_this);\n    });\n  };\n\n  DevicePixelRatioBinding.prototype._installResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      throw new Error('Resolution listener is already installed');\n    } // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n    // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n\n\n    var win = this.canvas.ownerDocument.defaultView;\n\n    if (win == null) {\n      throw new Error('No window is associated with the canvas');\n    }\n\n    var dppx = win.devicePixelRatio;\n    this._resolutionMediaQueryList = win.matchMedia(\"all and (resolution: \" + dppx + \"dppx)\"); // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n\n    this._resolutionMediaQueryList.addListener(this._resolutionListener);\n  };\n\n  DevicePixelRatioBinding.prototype._uninstallResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n      this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n\n      this._resolutionMediaQueryList = null;\n    }\n  };\n\n  DevicePixelRatioBinding.prototype._reinstallResolutionListener = function () {\n    this._uninstallResolutionListener();\n\n    this._installResolutionListener();\n  };\n\n  DevicePixelRatioBinding.prototype._onResolutionChanged = function () {\n    this._configureCanvas();\n\n    this._reinstallResolutionListener();\n  };\n\n  return DevicePixelRatioBinding;\n}();","map":{"version":3,"names":["defaultBindingOptions","allowDownsampling","bindToDevicePixelRatio","canvas","options","DevicePixelRatioBinding","_this","_resolutionMediaQueryList","_resolutionListener","ev","_onResolutionChanged","_canvasConfiguredListeners","_canvasSize","width","clientWidth","height","clientHeight","_options","_configureCanvas","_installResolutionListener","prototype","destroy","length","_uninstallResolutionListener","Object","defineProperty","get","enumerable","configurable","resizeCanvas","size","win","ownerDocument","defaultView","Error","devicePixelRatio","subscribeCanvasConfigured","listener","push","unsubscribeCanvasConfigured","filter","l","ratio","pixelRatio","style","_emitCanvasConfigured","forEach","call","dppx","matchMedia","addListener","removeListener","_reinstallResolutionListener"],"sources":["C:/Users/secre/SApp/node_modules/fancy-canvas/coordinate-space.js"],"sourcesContent":["var defaultBindingOptions = {\r\n    allowDownsampling: true,\r\n};\r\nexport function bindToDevicePixelRatio(canvas, options) {\r\n    if (options === void 0) { options = defaultBindingOptions; }\r\n    return new DevicePixelRatioBinding(canvas, options);\r\n}\r\nvar DevicePixelRatioBinding = /** @class */ (function () {\r\n    function DevicePixelRatioBinding(canvas, options) {\r\n        var _this = this;\r\n        this._resolutionMediaQueryList = null;\r\n        this._resolutionListener = function (ev) { return _this._onResolutionChanged(); };\r\n        this._canvasConfiguredListeners = [];\r\n        this.canvas = canvas;\r\n        this._canvasSize = {\r\n            width: this.canvas.clientWidth,\r\n            height: this.canvas.clientHeight,\r\n        };\r\n        this._options = options;\r\n        this._configureCanvas();\r\n        this._installResolutionListener();\r\n    }\r\n    DevicePixelRatioBinding.prototype.destroy = function () {\r\n        this._canvasConfiguredListeners.length = 0;\r\n        this._uninstallResolutionListener();\r\n        this.canvas = null;\r\n    };\r\n    Object.defineProperty(DevicePixelRatioBinding.prototype, \"canvasSize\", {\r\n        get: function () {\r\n            return {\r\n                width: this._canvasSize.width,\r\n                height: this._canvasSize.height,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DevicePixelRatioBinding.prototype.resizeCanvas = function (size) {\r\n        this._canvasSize = {\r\n            width: size.width,\r\n            height: size.height,\r\n        };\r\n        this._configureCanvas();\r\n    };\r\n    Object.defineProperty(DevicePixelRatioBinding.prototype, \"pixelRatio\", {\r\n        get: function () {\r\n            // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\r\n            // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\r\n            var win = this.canvas.ownerDocument.defaultView;\r\n            if (win == null) {\r\n                throw new Error('No window is associated with the canvas');\r\n            }\r\n            return win.devicePixelRatio > 1 || this._options.allowDownsampling ? win.devicePixelRatio : 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DevicePixelRatioBinding.prototype.subscribeCanvasConfigured = function (listener) {\r\n        this._canvasConfiguredListeners.push(listener);\r\n    };\r\n    DevicePixelRatioBinding.prototype.unsubscribeCanvasConfigured = function (listener) {\r\n        this._canvasConfiguredListeners = this._canvasConfiguredListeners.filter(function (l) { return l != listener; });\r\n    };\r\n    DevicePixelRatioBinding.prototype._configureCanvas = function () {\r\n        var ratio = this.pixelRatio;\r\n        this.canvas.style.width = this._canvasSize.width + \"px\";\r\n        this.canvas.style.height = this._canvasSize.height + \"px\";\r\n        this.canvas.width = this._canvasSize.width * ratio;\r\n        this.canvas.height = this._canvasSize.height * ratio;\r\n        this._emitCanvasConfigured();\r\n    };\r\n    DevicePixelRatioBinding.prototype._emitCanvasConfigured = function () {\r\n        var _this = this;\r\n        this._canvasConfiguredListeners.forEach(function (listener) { return listener.call(_this); });\r\n    };\r\n    DevicePixelRatioBinding.prototype._installResolutionListener = function () {\r\n        if (this._resolutionMediaQueryList !== null) {\r\n            throw new Error('Resolution listener is already installed');\r\n        }\r\n        // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\r\n        // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\r\n        var win = this.canvas.ownerDocument.defaultView;\r\n        if (win == null) {\r\n            throw new Error('No window is associated with the canvas');\r\n        }\r\n        var dppx = win.devicePixelRatio;\r\n        this._resolutionMediaQueryList = win.matchMedia(\"all and (resolution: \" + dppx + \"dppx)\");\r\n        // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\r\n        this._resolutionMediaQueryList.addListener(this._resolutionListener);\r\n    };\r\n    DevicePixelRatioBinding.prototype._uninstallResolutionListener = function () {\r\n        if (this._resolutionMediaQueryList !== null) {\r\n            // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\r\n            this._resolutionMediaQueryList.removeListener(this._resolutionListener);\r\n            this._resolutionMediaQueryList = null;\r\n        }\r\n    };\r\n    DevicePixelRatioBinding.prototype._reinstallResolutionListener = function () {\r\n        this._uninstallResolutionListener();\r\n        this._installResolutionListener();\r\n    };\r\n    DevicePixelRatioBinding.prototype._onResolutionChanged = function () {\r\n        this._configureCanvas();\r\n        this._reinstallResolutionListener();\r\n    };\r\n    return DevicePixelRatioBinding;\r\n}());\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}